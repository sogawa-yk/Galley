# タスクリスト

## 🚨 タスク完全完了の原則

**このファイルの全タスクが完了するまで作業を継続すること**

### 必須ルール
- **全てのタスクを`[x]`にすること**
- 「時間の都合により別タスクとして実施予定」は禁止
- 「実装が複雑すぎるため後回し」は禁止
- 未完了タスク（`[ ]`）を残したまま作業を終了しない

### 実装可能なタスクのみを計画
- 計画段階で「実装可能なタスク」のみをリストアップ
- 「将来やるかもしれないタスク」は含めない

### タスクスキップが許可される唯一のケース
以下の技術的理由に該当する場合のみスキップ可能:
- 実装方針の変更により、機能自体が不要になった
- アーキテクチャ変更により、別の実装方法に置き換わった

スキップ時は必ず理由を明記:
```markdown
- [x] ~~タスク名~~（実装方針変更により不要: 具体的な技術的理由）
```

---

## フェーズ1: コード修正

- [x] OKEイメージデータソースに`shape`パラメータを追加
- [x] ADBプライベートエンドポイントから`is_access_control_enabled`を削除

## フェーズ2: テスト修正・追加

- [x] OKEデータソースにshapeパラメータが含まれるテストを追加
- [x] ADB private endpointのテストから`is_access_control_enabled`チェックを削除し、含まれないことの確認を追加
- [x] 既存テストが全てパスすることを確認（259/259 passed）

## フェーズ3: 品質チェック

- [x] `uv run ruff check src/ tests/` エラーなし
- [x] `uv run ruff format --check src/ tests/` エラーなし
- [x] `uv run mypy src/` エラーなし

---

## 実装後の振り返り

### 実装完了日
2026-02-26

### 計画と実績の差分

**計画と異なった点**:
- なし。2件のP0修正を計画通りに完了。

**新たに必要になったタスク**:
- なし。

**技術的理由でスキップしたタスク**:
- なし。

### 学んだこと

**技術的な学び**:
- OCI `oci_core_images` データソースでFlex shapeのイメージを取得するには `shape` パラメータを明示指定する必要がある。shape未指定だとFlex非互換のイメージが返される
- ADBの `is_access_control_enabled` はADB種別（ATP/ADW/AI等）によってサポート状況が異なる。プライベートエンドポイント設定とアクセス制御設定は独立した関心事として分離すべき

**プロセス上の改善点**:
- mcp-gaugeでの検証テスト→フィードバック→修正のサイクルが効率的に回った
- 前回の大規模修正（8件）後のリグレッションテストとして、同一シナリオでの再テストが有効だった

### 次回への改善提案
- `_TF_REQUIRED_DATA_SOURCES`のハードコード値と`_TF_DEFAULTS`の値の重複を解消し、シェイプ値を1箇所で管理する仕組みを検討
- OKE Node Poolのplacement_configsでsubnet_idをprivate subnetに配置すべきケースの考慮（現状はpublic subnetのデフォルト参照）
